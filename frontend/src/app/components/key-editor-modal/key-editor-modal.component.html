<div class="modal-overlay" *ngIf="visible" (click)="closed.emit()">
  <div class="key-editor-modal" (click)="$event.stopPropagation()">
    <h3>{{ isEdit() ? ui.editor.editTitle : ui.editor.createTitle }}</h3>
    <form #f="ngForm" (ngSubmit)="submit(f.valid)">
      <div class="form-group">
        <label for="keyName">{{ ui.editor.keyName }}</label>
        <input
          id="keyName"
          name="keyName"
          [(ngModel)]="form.key"
          required
          [disabled]="isEdit()"
          placeholder="{{ 'e.g. user:1001' }}"
        />
      </div>
      <div class="form-group">
        <label for="keyType">{{ ui.editor.keyType }}</label>
        <select
          id="keyType"
          name="keyType"
          [(ngModel)]="form.type"
          [disabled]="isEdit()"
        >
          <option value="string">{{ "String" }}</option>
          <option value="hash">{{ "Hash" }}</option>
          <option value="list">{{ "List" }}</option>
          <option value="set">{{ "Set" }}</option>
        </select>
      </div>
      <div class="form-group">
        <label for="keyValue">{{ ui.editor.value }}</label>
        <textarea
          id="keyValue"
          name="keyValue"
          [(ngModel)]="form.value"
          rows="8"
          required
          placeholder="{{ 'Enter value...' }}"
        ></textarea>
      </div>
      <div class="form-group">
        <label for="keyTtl">{{ ui.editor.ttl }}</label>
        <input
          id="keyTtl"
          name="keyTtl"
          type="number"
          min="1"
          [(ngModel)]="form.ttlSeconds"
          placeholder="{{ 'Leave empty for no expiration' }}"
        />
      </div>
      <div class="form-actions">
        <button type="button" class="btn ghost" (click)="closed.emit()">
          {{ ui.editor.cancel }}
        </button>
        <button type="submit" class="btn" [disabled]="f.invalid || isSaving">
          {{
            isSaving
              ? ui.editor.saving
              : isEdit()
              ? ui.editor.update
              : ui.editor.create
          }}
        </button>
      </div>
    </form>
  </div>
</div>
